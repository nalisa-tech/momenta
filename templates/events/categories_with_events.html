{% extends "base.html" %}
{% load static %}

{% block title %}Event Categories â€“ Momenta{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<div class="container">
  <h1 class="page-title">Event Categories</h1>
  <p style="text-align: center; font-size: 18px; color: #666; margin-bottom: 40px;">
    Browse events by category and find your perfect experience
  </p>

  <!-- Categories Grid -->
  <div class="event-grid">
    {% for category in categories %}
    <div class="event-card">
      <!-- Category Icon & Header -->
      <div style="text-align: center; margin-bottom: 20px;">
        <div style="font-size: 48px; margin-bottom: 15px;">
          {% if 'Music' in category.name %}ğŸµ
          {% elif 'Tech' in category.name %}ğŸ’»
          {% elif 'Food' in category.name %}ğŸ½ï¸
          {% elif 'Sports' in category.name %}âš½
          {% else %}ğŸ“{% endif %}
        </div>
        <h2>{{ category.name }}</h2>
        <p style="color: #007bff; font-weight: 600;">
          {{ category.events.all|length }} Event{{ category.events.all|length|pluralize }}
        </p>
      </div>

      <!-- Events Preview -->
      {% if category.events.all %}
        <div style="margin-bottom: 20px;">
          {% for event in category.events.all|slice:":3" %}
          <div style="padding: 8px 0; border-bottom: 1px solid #eee;">
            <p style="font-weight: 600; margin-bottom: 5px;">{{ event.title }}</p>
            <p style="font-size: 13px; color: #666;">
              {{ event.date|date:"M d" }} â€¢ {{ event.location|truncatechars:20 }}
            </p>
          </div>
          {% endfor %}
          
          {% if category.events.all|length > 3 %}
          <p style="text-align: center; font-size: 12px; color: #999; margin-top: 10px;">
            +{{ category.events.all|length|add:"-3" }} more events
          </p>
          {% endif %}
        </div>
      {% else %}
        <div style="text-align: center; padding: 20px 0; color: #999;">
          <p>No events yet</p>
        </div>
      {% endif %}

      <!-- View All Button -->
      <a href="{% url 'events:events_list' %}?category={{ category.slug }}" class="btn" style="width: 100%; text-align: center; display: block;">
        View All Events
      </a>
    </div>
    {% empty %}
    <!-- No Categories Found -->
    <div style="text-align: center; padding: 60px 20px;">
      <div style="font-size: 80px; color: #ccc; margin-bottom: 20px;">ğŸ“</div>
      <h2 class="page-title" style="font-size: 28px; margin-bottom: 15px;">No Categories Available</h2>
      <p style="font-size: 16px; color: #666; margin-bottom: 30px;">Categories will appear here once they are created.</p>
      {% if user.is_staff %}
      <a href="{% url 'admin:events_category_add' %}" class="btn">
        Add First Category
      </a>
      {% endif %}
    </div>
    {% endfor %}
  </div>

  <!-- Call to Action -->
  <div style="background: #fff; padding: 40px; border-radius: 14px; margin: 40px auto; max-width: 800px; text-align: center; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);">
    <h2 style="font-size: 32px; font-weight: 700; color: #2c3e50; margin-bottom: 20px;">Can't Find What You're Looking For?</h2>
    <p style="font-size: 18px; color: #666; margin-bottom: 30px;">
      Browse all our events or get in touch with us to suggest new categories and events.
    </p>
    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
      <a href="{% url 'events:events_list' %}" class="btn" style="margin: 5px;">
        Browse All Events
      </a>
      <a href="mailto:nalisaimbula282@gmail.com" class="btn" style="background: #6c757d; margin: 5px;">
        Contact Us
      </a>
    </div>
  </div>
</div>
{% endblock %}